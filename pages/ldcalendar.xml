<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="DXCU Help/FAQ">
    <Require feature="opensocial-templates"/>
    <Require feature="opensocial-data"/>
    <Require feature="views"/>
    <Require feature="dynamic-height"/>
  </ModulePrefs>
  <Content type="html" view="home">
    <![CDATA[
    <link rel="stylesheet" href="./res/css/jquery-ui.css" type="text/css">    
     <script src='../res/js/jquery.min.js' type='text/javascript'></script>
     <script src='../res/js/jquery-ui.js' type='text/javascript'></script>
    
  <style type="text/css">
 #ex2 img {
            border: 1px solid white;
        }

            #ex2 img:hover {
                border: 1px solid black;
            }

        body {
            color: black;
            font-size: 1.3vw;
            line-height: 1.3;
        }

        a {
            -webkit-transition: background-color 100ms ease;
            transition: background-color 100ms ease;
            color: #000000;
            text-decoration: none;
        }

            a:hover {
                color: #000000;
            }

        .pill-button {
            display: inline-block;
            margin-right: 4px;
            margin-bottom: 4px;
            padding: 3px 9px;
            border: 1px none #fff;
            border-radius: 100px;
            background-color: hsla(0, 0%, 100%, .54);
            -webkit-transition: background-color 100ms ease, opacity 1000ms ease, -webkit-transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, -webkit-transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, transform 100ms ease, -webkit-transform 100ms ease;
            color: #000000;
            font-size: 1.35vw;
            font-weight: inherit;
        }

            .pill-button:hover {
                background-color: #B0B0B0;
                opacity: 1;
            }

            .pill-button.dark {
                border: 1px solid black;
                color: #000000;
            }

            .pill-button.dark {
                border: 1.0px solid black;
                color: #000000;
            }

        .breadcrumbslash {
            width: 8px;
            margin-right: 8px;
            margin-bottom: 0px;
            margin-left: 0px;
            opacity: 0.21;
        }

        html, body {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }

        .container {
            display: table;
            width: 100%;
        }

            .container > span {
                display: table-cell;
                width: auto;
                text-align: center;
            }
    </style>
    <script>
        //Code Starts
         $(document).ready(function () {
        var myArr = [];

        $.ajax({
            type: "GET",
            url: "https://raw.githubusercontent.com/dxcuni/lndtrainingcalender/itg/res/xml/calendardata.xml",
            //url: "links.xml",
            dataType: "xml",
            success: parseXml,
            complete: setupAC,
            failure: function (data) {
                alert("XML File could not be found");
            }
        });

        function parseXml(xml) {

            //find every query value
            $(xml).find("link").each(function () {
                myArr.push($(this).find('location').text());
            });
        }



/*        function setupAC() {
            $("input#searchBox").autocomplete({
                source: myArr,
                minLength: 3,
                select: function (event, ui) {
                    $("input#searchBox").val(ui.item.value);
                    $("#searchForm").submit();
                }
            });
        }
*/
        function setupAC() {
            var select = document.getElementById("selectTitle");
            var uniqMyArr = [];
            uniqMyArr = $.unique(myArr.sort())
            //uniqMyArr = unique(myArr);
            // Populate list with options:
            for (var i = 0; i < uniqMyArr.length; i++) {
                var opt = uniqMyArr[i];
                select.innerHTML += "<option value=\"" + opt + "\">" + opt + "</option>";               

            }
           ;
        }
  


        $("#searchKeyword").click(function () {
        $("#dvContent").empty();
        $("#dvContent").append("<div></div>");
        
        //var searchValue = $('#searchBox').val();  // Here you get the search text
        var searchValue = $('#selectTitle').val();  // Here you get the search text
            //alert("Hi " + searchValue);
        var strTable = ''
        val = true
        $.ajax({
            type: "GET",
            url: "https://raw.githubusercontent.com/dxcuni/lndtrainingcalender/itg/res/xml/calendardata.xml",
            //url: "links.xml",
            dataType: "xml",
            success: function (xml) {
                $(xml).find('link').each(function () {
                    var slocation = $(this).find('location').text();
                    var surl = $(this).find('url').text();
                    var courseName = $(this).find('coursename').text();

                    if (searchValue == slocation) {  // Only append those if search text matches with title
                        //$("<li></li>").html(stitle + ", " + surl).appendTo("#dvContent div");
                        //$( '<a href="' + surl + '" class="pill-button dark"  target="_blank" >' + courseName + '</a>'.appendTo("#dvContent div");
                        strTable += '<a href="' + surl + '" class="pill-button dark"  target="_blank" >' + courseName + '</a>';
                        //alert("Hi" + strTable)
                       //
                    }
                });
                $('#dvContent').append(strTable);
                val = false
                if (val) {
                    $("<li></li>").html("No data").appendTo("#dvContent div");

                }
            },
            error: function () {
                alert("An error occurred while processing XML file.");
                //console.log("An error occurred while processing XML file." + Response);
            }
        });
    });



    });

    </script>

  <label style="text-decoration-color:#000000">Keyword Search</label>
        <!--<input type="text" id="searchBox" name="searchBox" value="Test" />   --> 
    <select id="selectTitle" name="selectTitle">
    </select>

    <button name="searchKeyword" id="searchKeyword">Sumbit</button>
    <div id="dvContent">
    </div>


  ]]>
  </Content>
</Module>
