<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="DXCU Help/FAQ">
    <Require feature="opensocial-templates"/>
    <Require feature="opensocial-data"/>
    <Require feature="views"/>
    <Require feature="dynamic-height"/>
  </ModulePrefs>
  <Content type="html" view="home">
    <![CDATA[
    <link rel="stylesheet" href="./res/css/jquery-ui.css" type="text/css">    
     <script src='../res/js/jquery.min.js' type='text/javascript'></script>
     <script src='../res/js/jquery-ui.js' type='text/javascript'></script>
    
  <style type="text/css">
 #ex2 img {
            border: 1px solid white;
        }

            #ex2 img:hover {
                border: 1px solid black;
            }

        body {
            color: black;
            font-size: 1.3vw;
            line-height: 1.3;
        }

        a {
            -webkit-transition: background-color 100ms ease;
            transition: background-color 100ms ease;
            color: #000000;
            text-decoration: none;
        }

            a:hover {
                color: #000000;
            }

        .pill-button {
            display: inline-block;
            margin-right: 4px;
            margin-bottom: 4px;
            padding: 3px 9px;
            border: 1px none #fff;
            border-radius: 100px;
            background-color: hsla(0, 0%, 100%, .54);
            -webkit-transition: background-color 100ms ease, opacity 1000ms ease, -webkit-transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, -webkit-transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, transform 100ms ease;
            transition: background-color 100ms ease, opacity 100ms ease, transform 100ms ease, -webkit-transform 100ms ease;
            color: #000000;
            font-size: 1.35vw;
            font-weight: inherit;
        }

            .pill-button:hover {
                background-color: #B0B0B0;
                opacity: 1;
            }

            .pill-button.dark {
                border: 1px solid black;
                color: #000000;
            }

            .pill-button.dark {
                border: 1.0px solid black;
                color: #000000;
            }

        .breadcrumbslash {
            width: 8px;
            margin-right: 8px;
            margin-bottom: 0px;
            margin-left: 0px;
            opacity: 0.21;
        }

        html, body {
            height: 100%;
            width: 100%;
            padding: 0;
            margin: 0;
        }

        .container {
            display: table;
            width: 100%;
        }

            .container > span {
                display: table-cell;
                width: auto;
                text-align: center;
            }
    </style>
    <script>
        //Code Starts
         $(document).ready(function () {
         var myArrLocation = [];
         var myArrCourseMonth = [];
alert("Changes 333")
        $.ajax({
            type: "GET",
            url: "https://raw.githubusercontent.com/dxcuni/lndtrainingcalender/itg/res/xml/calendardata.xml",
            //url: "links.xml",
            dataType: "xml",
            success: parseXml,
            complete: setupAC,
            failure: function (data) {
                alert("XML File could not be found");
            }
        });

       function parseXml(xml) {
            //Put Locaiton/ month values in arry 
            $(xml).find("link").each(function () {
                var $item = $(this);
                myArrLocation.push($(this).find('location').text());
                myArrCourseMonth.push($(this).find('course_month').text());
            });           
           
            
        }



/*        function setupAC() {
            $("input#searchBox").autocomplete({
                source: myArr,
                minLength: 3,
                select: function (event, ui) {
                    $("input#searchBox").val(ui.item.value);
                    $("#searchForm").submit();
                }
            });
        }
*/
         function setupAC() {
            //// for location dropdown  setup 
            var selectLocation = document.getElementById("selectLocation");
            var uniqMyArrLocation = [];
            uniqMyArrLocation = $.unique(myArrLocation.sort())
            for (var i = 0; i < uniqMyArrLocation.length; i++) {
                var optLocation = uniqMyArrLocation[i];
                selectLocation.innerHTML += "<option value=\"" + optLocation + "\">" + optLocation + "</option>";

            }
            ;

            //// for month drop down setup 
            var selectCourseMonth = document.getElementById("selectCourseMonth");
            var uniqMyArrCourseMonth = [];
            uniqMyArrCourseMonth = $.unique(myArrCourseMonth.sort())
            for (var j = 0; j < uniqMyArrCourseMonth.length; j++) {
                var optCourseMonth = uniqMyArrCourseMonth[j];
                selectCourseMonth.innerHTML += "<option value=\"" + optCourseMonth + "\">" + optCourseMonth + "</option>";

            }
            ;
        }
  


        $("#searchKeyword").click(function () {
        $("#dvContent").empty();
        $("#dvContent").append("<div></div>");
        
        
        var searchLocation = $('#selectLocation').val();  // Here you get the search text
        var searchCourseMonth = $('#selectCourseMonth').val();  // Here you get the search text
            //alert("Hi " + searchValue);
        var strTable = ''
        val = true
        $.ajax({
            type: "GET",
            url: "https://raw.githubusercontent.com/dxcuni/lndtrainingcalender/itg/res/xml/calendardata.xml",
            //url: "links.xml",
            dataType: "xml",
            success: function (xml) {
               $(xml).find('link').each(function () {
                    var slocation = $(this).find('location').text();
                    var sMonth = $(this).find('course_month').text();
                    var surl = $(this).find('url').text();
                    var courseName = $(this).find('course_name').text();
                    //alert(sMonth)
                    if (searchLocation != '' && searchCourseMonth != '') {
                        if (searchLocation == slocation && searchCourseMonth == sMonth) {
                            strTable += '<a href="' + surl + '" class="pill-button dark"  target="_blank" >' + courseName + '</a>';
                            val = false
                          //  alert("11")
                        }
                    }
                    else if (searchLocation != '' && searchCourseMonth == '') {
                        if (searchLocation == slocation) {
                            strTable += '<a href="' + surl + '" class="pill-button dark"  target="_blank" >' + courseName + '</a>';
                            val = false
                           // alert("1")
                        }
                    }
                    else if (searchLocation == '' && searchCourseMonth != '') {
                        if (searchCourseMonth == sMonth) {
                            strTable += '<a href="' + surl + '" class="pill-button dark"  target="_blank" >' + courseName + '</a>';
                            val = false
                            //alert("1")
                        }
                    }
                    
                });
                $('#dvContent').append(strTable);                
                if (val) {
                    $("<li></li>").html("No data").appendTo("#dvContent div");

                }
            },
            error: function () {
                alert("An error occurred while processing XML file.");
            }
        });
    });



    });


    </script>
  <label style="text-decoration-color:#000000">Keyword Search</label>
        <!--<input type="text" id="searchBox" name="searchBox" value="Test" />   --> 
    <select id="selectLocation" name="selectLocation">
        <option value="">Select Location</option>
    </select>
    <select id="selectCourseMonth" name="selectCourseMonth">
        <option value="" >Select Month</option>
    </select>

    <button name="searchKeyword" id="searchKeyword">Sumbit</button>
    <div id="dvContent">
    </div>


  ]]>
  </Content>
</Module>
